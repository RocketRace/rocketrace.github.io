<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>///</title>
<script>
let t=undefined
let f=async()=>{
  let e=document.getElementById("e")
  let d=document.getElementById("d")
  let o=document.getElementById("o")
  let p=[...e.innerText]
  // 0 out 1 pat 2 rep
  while(p.length) {
  let a=["","",""]
    for (let s=0; s<3; s++) {
      while(p.length) {
        let c=p.shift()
        if(c=="/") { break }
        else if(c=="\\") { a[s]+=p.shift() }
        else { a[s]+=c }
      }
    }
    p=p.join("")
    while(p) {
      let r=p.replace(a[1],a[2])
      if(p==r) { break }
      p=r
    }
    p=[...p]
    e.innerText=p
    if(a[0]) { o.innerText=a[0] }
    await new Promise((r,_)=>t=setTimeout(r,d.value))
  }
}
let h=()=>clearTimeout(t)
</script>
<style>
pre {
  display: block;
  resize: both;
  border: solid 1px lightgray;
  padding: 20px 10px;
  overflow: scroll;
}
</style>
</head>
<body>
<button type="button" onclick="f()">run</button> frame delay:<input type="number" id="d" value="30">ms <button type=button onclick="h()">stop</button>
<br>
<pre id="e" contenteditable>/]
/]//] /]//][//]
[/|/<-\\\\>\\\\\\/]
[/QT/]
    [|/R|N|/Q|T|/|/<-|\|\>|/<-|\|\|\|\>|\|\|\|\|/|/<|\->|/|/]
    [C|T|/C|\T|/C|T|/|/*|\
]   [|/I|\N|/|/I|\N|/**|\
]   [|/]
    [|/Q|\T|/Q|T|/R|N]
[/]
[/RN/QT//<-\\>/<-\\\\>\\\\//<\->//]
[/CT/*
/]
[/Q\T/QT/RN</pre>
<pre id="o"></pre>
</body>
</html>
